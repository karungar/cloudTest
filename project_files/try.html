<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resume</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-slate-200 max-w-4xl mx-auto">
    <div id="resumeContainer"></div>

    <script>
        // JSON data in DynamoDB format
        const jsonData = {
          "id": {"S": "1"},
          "basics": {
            "M": {
              "name": {"S": "Sylvia Njoki Waweru"},
              "label": {"S": "Cloud Engineer"},
              "image": {"S": ""},
              "email": {"S": "sylvia.waweru@gmail.com"},
              "phone": {"S": "(254) 722143317"},
              "summary": {"S": "I am a Cloud enthusiast with a desire to learn and build my hands-on Cloud Computing skills. A certified AWS Cloud Practitioner seasoned with hands-on skills to build highly available and scalable web applications using AWS. Experience in Terraform, CI/CD using GitHub actions, and AWS Security best Practices."},
              "location": {
                "M": {
                  "address": {"S": "Lakeview"},
                  "postalCode": {"S": "20117"},
                  "city": {"S": "Naivasha"},
                  "countryCode": {"S": "Kenya"}
                }
              }
            }
          },
          "professional experience": {
            "L": [
              {
                "M": {
                  "institution": {"S": "CloudmyTribe"},
                  "position": {"S": "Community member"},
                  "startDate": {"S": "2024-05"},
                  "endDate": {"S": "present"},
                  "description":  {
                    "L": [
                      {"S": "Built a serverless web application using AWS Lambda, API Gateway, and DynamoDB"},
                      {"S": "Used Terraform to automate infrastructure provisioning on AWS, reducing deployment time by 50%"},
                      {"S": "Integrated logging and monitoring solutions with AWS CloudWatch, providing real-time insights and troubleshooting capabilities"},
                      {"S": "Built a static website with AWS simple Storage Service, Cloud Front, and Route53"}
                    ]
                  } 
                }
              }
            ]
          },  
          "education": {
            "L": [
              {
                "M": {
                  "institution": {"S": "Ajira Digital"},
                  "url": {"S": "https://ajiradigital.go.ke/"},
                  "area": {"S": "AWS Cloud Foundations"},
                  "studyType": {"S": "AWS re/ Start Cohort 9"},
                  "startDate": {"S": "2024-01-05"},
                  "endDate": {"S": "2024-04-31"},
                  "score": {"S": "Ranked a gold student"},
                  "courses": {
                    "L": [
                      {"S": "AWS Certified Cloud Practitioner course"}
                    ]
                  }
                }
              },
              {
                "M": {
                  "institution": {"S": "Kenyatta University"},
                  "url": {"S": "https://www.ku.ac.ke/"},
                  "area": {"S": "Analytical Chemistry"},
                  "studyType": {"S": "Bachelor"},
                  "startDate": {"S": "2008-01-09"},
                  "endDate": {"S": "2013-01-12"},
                  "score": {"S": "Second class Honors Upper Division"}
                }
              }
            ]
          },  
          "certificates": {
            "L": [
              {
                "M": {
                  "name": {"S": "AWS Certified Cloud Practitioner"},
                  "start date": {"S": "2024-04-18"},
                  "expiration date": {"S": "2027-04-18"},
                  "issuer": {"S": "Amazon Web Services"},
                  "url": {"S": "https://cp.certmetrics.com/amazon/en/credentials/status/2822543"}
                }
              }
            ]
          },
          "skills": {
            "L": [
              {
                "M": {
                  "name": {"S": "AWS Services"},
                  "level": {"S": "Foundational"},
                  "keywords": {
                    "L": [
                      {"S": "Amazon S3"},
                      {"S": "AWS Lambda"},
                      {"S": "AWS API gateway"},
                      {"S": "AWS CloudFront"},
                      {"S":"AWS Dynamodb"}
                    ]
                  }
                }
              },
              {
                "M": {
                  "name": {"S": "Web Development"},
                  "level": {"S": "Beginner"},
                  "keywords": {
                    "L": [
                      {"S": "HTML"},
                      {"S": "CSS"},
                      {"S": "JavaScript"}
                    ]
                  }
                }
              },
              {
               "M": {
                  "name": {"S": "Infrastructure as Code with Terraform"},
                  "level": {"S": "Beginner"}
                } 
              },
              {
                  "M": {
                     "name": {"S": "CI/CD Pipeline using Github Actions"},
                     "level": {"S": "Beginner"}
                   } 
                 },
                 {
                  "M": {
                     "name": {"S": "Interpersonal and Networking skills"}
                   } 
                 }
            ]
          },
          "projects": {
            "L": [
              {
                "M": {
                  "name": {"S": "Cloud Resume Project"},
                  "startDate": {"S": "2024-06-01"},
                  "endDate": {"S": "2024-06-30"},
                  "description": {"S": "The project involved hosting a static website on S3 and distributing it with CloudFront and hosting it on Route53."},
                  "url": {"S": "https://github.com/karungar/deploy-a-static-website-to-S3"}
                }
              },
              {
                "M": {
                  "name": {"S": "Cloud Resume API Challenge"},
                  "startDate": {"S": "2024-07-01"},
                  "endDate": {"S": "2024-07-31"},
                  "description": {"S": "The project involved building and deploying a serverless API using AWS Lambda and DynamoDB and integrating it with GitHub actions. I used Terraform as Infrastructure as Code tool to provision the AWS resources as code"},
                  "url": {"S": "https://cloudresumeapi.dev/aws/"}
                }
              }  
            ]
          },
          "languages": {
            "L": [
              {
                "M": {
                  "language": {"S": "English"},
                  "Proficiency": {"S": "Fluent"}
                }
              },
              {
                "M": {
                  "Language": {"S": "Japanese"},
                  "Proficiency": {"S": "JLPT N4"}
                }
              }  
           ]
          }
        };

        // Helper function to get values from DynamoDB format
        function getDynamoDBValue(item) {
            if (item.S !== undefined) return item.S;
            if (item.M !== undefined) return item.M;
            if (item.L !== undefined) return item.L.map(getDynamoDBValue);
            return item;
        }

        // Convert JSON structure to simpler format
        const data = {
            id: getDynamoDBValue(jsonData.id),
            basics: {
                name: getDynamoDBValue(jsonData.basics.M.name),
                label: getDynamoDBValue(jsonData.basics.M.label),
                image: getDynamoDBValue(jsonData.basics.M.image),
                email: getDynamoDBValue(jsonData.basics.M.email),
                phone: getDynamoDBValue(jsonData.basics.M.phone),
                summary: getDynamoDBValue(jsonData.basics.M.summary),
                location: {
                    address: getDynamoDBValue(jsonData.basics.M.location.M.address),
                    postalCode: getDynamoDBValue(jsonData.basics.M.location.M.postalCode),
                    city: getDynamoDBValue(jsonData.basics.M.location.M.city),
                    countryCode: getDynamoDBValue(jsonData.basics.M.location.M.countryCode)
                }
            },
            experience: jsonData["professional experience"].L.map(exp => ({
                institution: getDynamoDBValue(exp.M.institution),
                position: getDynamoDBValue(exp.M.position),
                startDate: getDynamoDBValue(exp.M.startDate),
                endDate: getDynamoDBValue(exp.M.endDate),
                description: getDynamoDBValue(exp.M.description)
            })),
            education: jsonData.education.L.map(edu => ({
                institution: getDynamoDBValue(edu.M.institution),
                url: getDynamoDBValue(edu.M.url),
                area: getDynamoDBValue(edu.M.area),
                studyType: getDynamoDBValue(edu.M.studyType),
                startDate: getDynamoDBValue(edu.M.startDate),
                endDate: getDynamoDBValue(edu.M.endDate),
                score: getDynamoDBValue(edu.M.score),
                courses: getDynamoDBValue(edu.M.courses)
            })),
            certificates: jsonData.certificates.L.map(cert => ({
                name: getDynamoDBValue(cert.M.name),
                startDate: getDynamoDBValue(cert.M["start date"]),
                expirationDate: getDynamoDBValue(cert.M["expiration date"]),
                issuer: getDynamoDBValue(cert.M.issuer),
                url: getDynamoDBValue(cert.M.url)
            })),
            skills: jsonData.skills.L.map(skill => ({
                name: getDynamoDBValue(skill.M.name),
                level: getDynamoDBValue(skill.M.level),
                keywords: getDynamoDBValue(skill.M.keywords)
            })),
            projects: jsonData.projects.L.map(project => ({
                name: getDynamoDBValue(project.M.name),
                startDate: getDynamoDBValue(project.M.startDate),
                endDate: getDynamoDBValue(project.M.endDate),
                description: getDynamoDBValue(project.M.description),
                url: getDynamoDBValue(project.M.url)
            })),
            languages: jsonData.languages.L.map(lang => ({
                language: getDynamoDBValue(lang.M.language),
                proficiency: getDynamoDBValue(lang.M.Proficiency)
            }))
        };

        // Function to generate and display the resume
        function displayResume() {
            let htmlContent = `
                <section class="text-center">
                    <h1 class="text-4xl font-bold">${data.basics.name}</h1>
                    <p class="text-lg text-gray-600">${data.basics.label}</p>
                    <p class="text-lg">${data.basics.email} | ${data.basics.phone}</p>
                    <p class="text-lg">${data.basics.location.city}, ${data.basics.location.countryCode}</p>
                    <hr class="my-4">
                </section>
                <section>
                    <h2 class="text-2xl font-semibold">Summary</h2>
                    <p class="text-lg">${data.basics.summary}</p>
                </section>
                <section>
                    <h2 class="text-2xl font-semibold">Professional Experience</h2>
                    <ul class="list-disc pl-5">`;

            data.experience.forEach(exp => {
                htmlContent += `
                        <li>
                            <h3 class="font-bold">${exp.position}</h3>
                            <p class="italic">${exp.institution} (${exp.startDate} - ${exp.endDate})</p>
                            <ul class="list-disc pl-5">`;

                exp.description.forEach(desc => {
                    htmlContent += `<li>${desc}</li>`;
                });

                htmlContent += `</ul></li>`;
            });

            htmlContent += `
                    </ul>
                </section>
                <section>
                    <h2 class="text-2xl font-semibold">Education</h2>
                    <ul class="list-disc pl-5">`;

            data.education.forEach(edu => {
                htmlContent += `
                        <li>
                            <h3 class="font-bold">${edu.institution}</h3>
                            <p class="italic">${edu.studyType} in ${edu.area} (${edu.startDate} - ${edu.endDate})</p>
                            <p>${edu.score}</p>
                        </li>`;
            });

            htmlContent += `
                    </ul>
                </section>
                <section>
                    <h2 class="text-2xl font-semibold">Certifications</h2>
                    <ul class="list-disc pl-5">`;

            data.certificates.forEach(cert => {
                htmlContent += `
                        <li>
                            <h3 class="font-bold">${cert.name}</h3>
                            <p class="italic">${cert.issuer} (Valid: ${cert.startDate} - ${cert.expirationDate})</p>
                            <a href="${cert.url}" class="text-blue-500">View Certificate</a>
                        </li>`;
            });

            htmlContent += `
                    </ul>
                </section>
                <section>
                    <h2 class="text-2xl font-semibold">Skills</h2>
                    <ul class="list-disc pl-5">`;

            data.skills.forEach(skill => {
                htmlContent += `
                        <li>
                            <h3 class="font-bold">${skill.name} - ${skill.level}</h3>
                            <p>Keywords: ${skill.keywords.join(', ')}</p>
                        </li>`;
            });

            htmlContent += `
                    </ul>
                </section>
                <section>
                    <h2 class="text-2xl font-semibold">Projects</h2>
                    <ul class="list-disc pl-5">`;

            data.projects.forEach(project => {
                htmlContent += `
                        <li>
                            <h3 class="font-bold">${project.name}</h3>
                            <p class="italic">(${project.startDate} - ${project.endDate})</p>
                            <p>${project.description}</p>
                            <a href="${project.url}" class="text-blue-500">View Project</a>
                        </li>`;
            });

            htmlContent += `
                    </ul>
                </section>
                <section>
                    <h2 class="text-2xl font-semibold">Languages</h2>
                    <ul class="list-disc pl-5">`;

            data.languages.forEach(language => {
                htmlContent += `
                        <li>
                            <p>${language.language} - ${language.proficiency}</p>
                        </li>`;
            });

            htmlContent += `
                    </ul>
                </section>`;

            // Inject the generated HTML into the resumeContainer
            document.getElementById('resumeContainer').innerHTML = htmlContent;
        }

        // Call the function to display the resume
        displayResume();
    </script>
</body>
</html>
